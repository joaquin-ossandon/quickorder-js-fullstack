name: JavaScript Linting (ESLint)

# Ejecutar en push a ramas principales y en Pull Requests
on:
  push:
    branches:
      - main
      - master
      - develop
  pull_request:
    branches:
      - main
      - master
      - develop

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout: Descargar el código
      - uses: actions/checkout@v4

      # 2. Setup Node.js: Configurar el entorno (es necesario para NPM/ESLint)
      - name: Use Node.js 20.x
        uses: actions/setup-node@v4
        with:
          node-version: '20.x' # Usamos una versión estable de Node.js

      # 3. Instalación de ESLint y Dependencias de forma Temporal y Global
      # ¡ESTE ES EL PASO CLAVE!
      - name: Install ESLint and Required Configs Globally
        run: |
          # Instalamos las herramientas necesarias para leer el .eslintrc.js
          # Esto instala ESLint y todas las configuraciones de Airbnb/Prettier.
          # Esto sucede solo en el servidor de GitHub, no en el local del alumno.
          npm install -g eslint@8 eslint-config-airbnb-base eslint-plugin-import eslint-config-prettier prettier

      # 4. Ejecutar ESLint
      - name: Run ESLint Check
        # Ejecutamos el linter usando el binario global (eslint)
        # El comando 'eslint' detectará automáticamente el archivo .eslintrc.js
        # --max-warnings 0 asegura que falle con cualquier advertencia o error.
        run: |
          eslint . --ext .js --max-warnings 0
