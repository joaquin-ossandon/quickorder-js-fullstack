name: JavaScript Linting (ESLint)

on:
  push:
    branches: [main, master, develop]
  pull_request:
    branches: [main, master, develop]

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
      # 1. Descargar el c√≥digo
      - name: Checkout Repository
        uses: actions/checkout@v4

      # 2. Configurar Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'

      # 3. Crear entorno temporal e instalar dependencias
      # Hacemos 'npm init -y' para crear un package.json temporal SOLO en el servidor.
      # Luego instalamos las dependencias LOCALMENTE en el servidor.
      # Esto permite que ESLint encuentre 'airbnb-base' sin problemas.
      - name: Install Dependencies (Temporary Local)
        run: |
          npm init -y
          npm install eslint@8 eslint-config-airbnb-base eslint-plugin-import eslint-config-prettier prettier

      # 4. Ejecutar ESLint
      # Usamos 'npx' para ejecutar el eslint que acabamos de instalar localmente.
      - name: Run ESLint Check
        run: |
          npx eslint . --ext .js --max-warnings 0
