name: JavaScript Linting (ESLint)

on:
  push:
    branches: [main, master, dev]
  pull_request:
    branches: [main, master, dev]

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'

      - name: Install Dependencies (Force ESLint 8 & Airbnb)
        run: |
          # 1. Creamos un package.json temporal para este entorno
          npm init -y

          # 2. Instalamos ESLint 8 ESPECÍFICAMENTE (Airbnb no soporta la v9 aún)
          #    Instalamos también todos los plugins necesarios explícitamente.
          npm install \
            eslint@^8.57.0 \
            eslint-config-airbnb-base@^15.0.0 \
            eslint-plugin-import@^2.29.1 \
            eslint-config-prettier@^9.1.0 \
            prettier@^3.2.5

      - name: Run ESLint Check
        run: npx eslint . --ext .js --max-warnings 0 --resolve-plugins-relative-to .
